<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Download do E-book</title>
    <!--Responsive-->
    <meta name="viewport" content="width=mobile-width, initial-scale=1">
    <!--Meta Article-->
    <meta property="og:type"               content="article" />
    <meta property="og:title"              content="Max Sanfona"/>
    <meta property="og:description"        content="Mistério do Compasso: Download Ebook!"/>
    <meta property="fb:app_id"             content="395218274842235"/>
    <meta property="og:url"                content="https://maxsanfona.com/" />
    <meta property="og:image"              content="https://maxsanfona.com/imagens/MaxSanfonaMeta.jpg"/>
    <!--Ico-->
    <!--Img Aba-->
    <link rel="icon" href="imagens/LOGO maxsanfona ouro.png" type="image/x-icon">
    <link rel="shortcut icon" href="imagens/LOGO maxsanfona ouro.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="style1.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://kit.fontawesome.com/73131e96fb.js" crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-88WFZ20CC3"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-88WFZ20CC3');
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics Organic -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-QM8KS44QZD"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-QM8KS44QZD');
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics Ads-->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-181373549-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-181373549-1');
        </script>
        <!-- Meta Pixel Code -->
        <script>
            !function(f,b,e,v,n,t,s)
            {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
            fbq('init', '195697228207071');
            fbq('track', 'PageView');
        </script>
        <noscript>
            <img height="1" width="1" style="display:none"src="https://www.facebook.com/tr?id=195697228207071&ev=PageView&noscript=1"/>
        </noscript>
        <!-- End Meta Pixel Code -->   
    <!--Script Cookie Footer-->
    <script>
        (function(w,d,e,n,s,c,a,f){w['LnkConsentObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments)},w[n].c=c;a=d.createElement(e),
        f=d.getElementsByTagName(e)[0];a.async=1;a.src=s;f.parentNode.insertBefore(a,f)
        })(window,document,'script','lnk_consent',
        'https://static.assetlab.io/consent/1.10.5/consent.js',
        'https://static.assetlab.io/consent/1.10.5/consent.css');
    </script>
    <!--Style Cookie-->
    <!--script responsive button-->
    <style>
    .cookie-notification {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        color: black;
        text-align: center;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        max-width: 80%;
        z-index: 9999;
    }
    button.aceitar {
        background-color: black;
        color: #fff;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 10px; /* Bordas arredondadas */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        float: left; /* Faz com que eles apareçam lado a lado no computador */
        
    }
    button.recusar {
        background-color: black;
        color: #fff;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        float: right;/* Faz com que eles apareçam lado a lado no computador */
    }
    .imgcookie{
        width: 100px; /* Define a largura da imagem como 100 pixels */
        height: 100px;
    }
     @media screen and (max-width: 768px) {
        button.aceitar, button.recusar {
            
            color: white;
            float: none; /* Remove o float */
            margin: 5px 0; 
        }
    }
    #google-login i {
            color: #db4437; /* Cor do Google (vermelho) */
        }

        #microsoft-login i {
            color: #00a4ef; /* Cor do Microsoft (azul) */
        }
        
        .glow {
    position: absolute;
        width: 1px;
        height: 1px;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        box-shadow: 0 0 1px 1px rgba(255, 255, 255, 0.2);
        pointer-events: none;
}



</style>
</head>
<body>
    <!--script background-->
    <script>
    const numberOfGlows = 300; // Número de flocos de neve
    const glows = [];
    let centerX = window.innerWidth / 2; // Posição X inicial do centro da tela
    let centerY = window.innerHeight / 2; // Posição Y inicial do centro da tela

    // Função para gerar um número aleatório dentro de um intervalo
    function random(min, max) {
        return Math.random() * (max - min) + min;
    }

    // Função para criar um floco de neve
    function createGlow() {
        const glow = document.createElement('div');
        glow.classList.add('glow');
        // Posição inicial aleatória com buffer extra
        glow.style.left = `${random(-100, window.innerWidth + 100)}px`;
        glow.style.top = `${random(-100, window.innerHeight + 100)}px`;
        document.body.appendChild(glow);
        return glow;
    }

    // Função para animar os flocos de neve com movimento flutuante
    function animateGlow(glow) {
        const duration = random(5, 15); // Duração da animação entre 5 e 15 segundos
        const endX = random(-0, 0); // Movimento lateral aleatório maior
        const endY = random(50, 150); // Movimento vertical aleatório para simular neve caindo

        requestAnimationFrame(() => {
            glow.style.transition = `transform ${duration}s ease-in-out`;
            const currentTransform = getComputedStyle(glow).transform;
            const matrix = new DOMMatrix(currentTransform);
            let newX = matrix.m41 + endX;
            let newY = matrix.m42 + endY;

            // Reentrar flocos que saem dos limites da janela
            if (parseFloat(glow.style.left) + newX < -100) {
                newX = window.innerWidth + 100 - parseFloat(glow.style.left);
            }
            if (parseFloat(glow.style.left) + newX > window.innerWidth + 100) {
                newX = -100 - parseFloat(glow.style.left);
            }
            if (parseFloat(glow.style.top) + newY > window.innerHeight + 100) {
                glow.style.top = `${-100}px`; // Recomeçar acima da tela
                newY = 0;
            }

            glow.style.transform = `translate(${newX}px, ${newY}px)`;
        });

        // Reiniciar a animação quando ela termina
        glow.addEventListener('transitionend', () => animateGlow(glow), { once: true });
    }

    // Cria e anima todos os flocos de neve
    for (let i = 0; i < numberOfGlows; i++) {
        const glow = createGlow();
        glows.push(glow);
        animateGlow(glow);
    }

    // Função para mover os flocos quando o cursor se move
    function moveGlows(event) {
        const deltaX = event.clientX - centerX; // Diferença de posição X do cursor
        const deltaY = event.clientY - centerY; // Diferença de posição Y do cursor
        centerX = event.clientX; // Atualiza a posição X do centro
        centerY = event.clientY; // Atualiza a posição Y do centro
        glows.forEach(glow => {
            const currentLeft = parseFloat(glow.style.left);
            const currentTop = parseFloat(glow.style.top);

            // Movimentar os flocos com um efeito sutil
            glow.style.left = `${currentLeft + deltaX * 0.1}px`;
            glow.style.top = `${currentTop + deltaY * 0.1}px`;
        });
    }

    // Evento para mover os flocos com o mouse
    window.addEventListener('mousemove', moveGlows);

    // Evento para mover os flocos com o toque na tela (para dispositivos móveis)
    window.addEventListener('touchmove', (event) => {
        const touch = event.touches[0];
        moveGlows(touch);
    });
</script>

    <div class="article">
        <br><br><br><br><br><br><br><br><br>
        <div class="nav"><br>
            
            <img class="imgartigomaior" src="imagens/MisteriodoCompasso.png" alt="imgartigomenor" style="width:150px;height:150px;float:center;"> 
            <img class="imgartigomenor" src="imagens/MisteriodoCompasso.png" alt="imgartigomaior" style="width:100px;height:100px;float:center;">
    
            <h1 style="color:white">"Mistério do Compasso"</h1>
            <p style="color:white"> Receba o ebook e explore como músicos, empreendedores e profissionais liberais podem transformar sua vida.  
                <br>Inscreva-se agora e receba o conteúdo exclusivo na semana de lançamento, diretamente no seu e-mail. 
                <br>Aguarde a liberação do Curso de Introdução à Partitura e dê o primeiro passo para dominar a música.
            </p>
            <br>
            <!-- Login Social -->
            <div id="login-container">
                <button id="google-login" class="nav"><i class="fab fa-google"></i></button>
                <button id="microsoft-login" class="nav"><i class="fab fa-microsoft"></i></button>
            </div>
            <br>
            <!-- Formulário de E-mail -->
            <!-- Formulário de E-mail -->
            <form id="email-form" class="article">
                <div>
                    <input 
                        class="nav" 
                        type="email" 
                        id="email" 
                        placeholder="Digite seu e-mail" 
                        required 
                        style="width:80%; padding:10px; margin-bottom:10px;">
                </div>
                <button id="enviar-email" class="nav" type="submit" style="color:white">
                    Receber E-book
                </button>
            </form>
            <br>
            <!--Permissão Cookie/CNPJ-->
            <footer>
                <div class="lnk-c-footnote is-active" style="">
                    <p>Este site utiliza cookies para melhorar sua experiência. Ao continuar, você concorda com o uso de cookies. 
                        <button class="lnk-c-inline-btn--white" onclick="mostrarNotificacao()">Clique aqui
                        </button> para gerenciar suas permissões.
                    </p>
                <div class="lnk-c-footnote__affiliate">© Copyright 2020-<script type="text/javascript">
                    document.write(new Date().getFullYear());
                    </script>
                    | All rights reserved to <br> 
                    <a href="https://cadastroempresa.com.br/cnpj/09.299.723/0001-08-max-corporation-ltda">Max Corporation Ltda 09.299.723/0001-08.</a> 
                </div>
            </div>
            </footer>
            <!--div cookie-->
            <div id="cookie-notification" class="cookie-notification">
                <div ><img
                    class="imgcookie"
                    src="https://maxsanfona.com/imagens/Logo MaxCoporation.png"
                    alt="Max Corporation">
                </div>
                <p><strong>Max Corporation</strong> utiliza cookies para melhorar a sua experiência e fornecer conteúdo personalizado, incluindo o envio de e-mails. Ao aceitar, você consente com o uso de cookies. Você pode gerenciar suas preferências a qualquer momento.</p>
                <div><button id="aceitar-cookie" class="aceitar">Aceitar</button></div>
                <div><button id="recusar-cookie" class="recusar">Recusar</button></div>
            </div>
        </div>
    </div>
    <!-- Firebase Script para login social -->
    <script type="module">
    // Firebase Configuration
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, OAuthProvider } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";
    
    const firebaseConfig = {
        apiKey: "AIzaSyC5pHf8fLedACs1jHE2L6HquMW2j2pHNDs",
        authDomain: "max-corporation-9d069.firebaseapp.com",
        projectId: "max-corporation-9d069",
        storageBucket: "max-corporation-9d069.appspot.com",
        messagingSenderId: "236676208304",
        appId: "1:236676208304:web:2f0c43309c99590b794d75",
        measurementId: "G-ZGQQEE0LG5"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    
    // Login com Google
    document.getElementById("google-login").addEventListener("click", async () => {
        const provider = new GoogleAuthProvider();
        provider.addScope("email");
    
        try {
            const result = await signInWithPopup(auth, provider);
            const user = result.user;
    
            if (user) {
                const email = user.email;
                const userName = user.displayName || email;
    
                console.log("Usuário autenticado:", email, userName);
    
                await salvarNoFirestore(email, userName);
                await enviarEmail(email, userName);
                alert(`E-mail enviado com sucesso! Bem-vindo, ${userName}. Verifique sua caixa de entrada, spam ou lixo eletrônico.`);
               // window.location.href = "https://maxsanfona.com/Misterio_do_Compasso.pdf"; // Direciona para o e-book
            }
        } catch (error) {
            console.error("Erro no login com Google:", error.message);
            alert("Por favor, abra este link em um navegador como Chrome ou Safari.");
            
        }
    });
    
    // Login com Microsoft
    document.getElementById("microsoft-login").addEventListener("click", async () => {
        const provider = new OAuthProvider('microsoft.com');
        provider.addScope("email");
    
        try {
            const result = await signInWithPopup(auth, provider);
            const user = result.user;
    
            if (user) {
                const email = user.email;
                const userName = user.displayName || email;
    
                console.log("Usuário autenticado com Microsoft:", email, userName);
    
                await salvarNoFirestore(email, userName);
                await enviarEmail(email, userName);
                alert(`E-mail enviado com sucesso! Bem-vindo, ${userName}. Verifique sua caixa de entrada, spam ou lixo eletrônico.`);
                //window.location.href = "https://maxsanfona.com/Misterio_do_Compasso.pdf"; // Direciona para o e-book
            }
        } catch (error) {
            console.error("Erro no login com Microsoft:", error.message);
            alert("Por favor, abra este link em um navegador como Chrome ou Safari.");
            
        }
    });
    
    // Função para salvar no Firestore
    async function salvarNoFirestore(email, name) {
        try {
            const userRef = doc(db, "usuarios", email);
            await setDoc(userRef, { nome: name, email: email, dataCriacao: new Date().toISOString() });
            console.log("Dados salvos no Firestore:", email);
        } catch (error) {
            console.error("Erro ao salvar no Firestore:", error);
        }
    }
    
    // Função para enviar e-mail
    //async function enviarEmail(email, name) {
        //const message = `
          //  <div style='text-align: center; font-family: Arial, sans-serif; color: #333;'>
            //    <h1>Obrigado por se inscrever!</h1>
          //      <p>Estamos muito felizes em compartilhar nosso e-book com você. Baixe-o usando o link abaixo:</p>
           //     <a href='https://maxsanfona.com/Misterio_do_Compasso.pdf' 
         //          style='display: inline-block; margin: 20px 0; padding: 10px 20px; color: #fff; background-color: #007BFF; text-decoration: none; border-radius: 5px;'>
        //           Baixar E-book
      //          </a>
    //            <br>
    //        </div>
    //    `;

   // try {
      //  const response = await fetch("enviar_email.php", {
     //       method: "POST",
  //          headers: { "Content-Type": "application/json" },
    //        body: JSON.stringify({
     //           email: email,
       //         subject: "Baixe o E-book: Mistério do Compasso",
    //            message: message
    //        })
    //    });

   //     const result = await response.json();
   //     console.log("Resposta do servidor:", result);

    //    if (result.status === 'success') {
    //        alert("E-mail enviado com sucesso!");
  //      } else {
    //        alert("Erro ao enviar e-mail: " + result.message);
    //    }
  //  } catch (error) {
   //     console.error("Erro ao enviar e-mail:", error);
   // }
//}

document.getElementById("email-form").addEventListener("submit", async (event) => {
    event.preventDefault(); // Evita o recarregamento da página

    const emailInput = document.getElementById("email");
    const email = emailInput.value.trim();
    const userName = "Usuário do Formulário"; // Defina um valor padrão para userName

    if (!email) {
        alert("Por favor, insira um e-mail válido.");
        return;
    }

    try {
        // Salvar no Firestore
        await salvarNoFirestore(email, userName);

        // Enviar e-mail
        await enviarEmail(email, userName);

        // Exibir mensagem de sucesso e redirecionar para o e-book
        alert(`E-mail enviado com sucesso! Bem-vindo, ${userName}. Verifique sua caixa de entrada, spam ou lixo eletrônico.`);
       // window.location.href = "https://maxsanfona.com/Misterio_do_Compasso.pdf";
    } catch (error) {
        console.error("Erro no envio do formulário:", error);
        alert("Ocorreu um erro ao processar seu cadastro. Por favor, tente novamente mais tarde.");
    }
});



    
        
    </script>
    <!--Script Cookie-->
    <script>
        // Função para mostrar a notificação de cookie
        function mostrarNotificacao() {
            var cookieNotification = document.getElementById('cookie-notification');
            cookieNotification.style.display = 'block';
        }

        // Função para aceitar cookies
        function aceitarCookies() {
            var cookieNotification = document.getElementById('cookie-notification');
            cookieNotification.style.display = 'none';
    
            // Configura cookies aceitos
            localStorage.setItem('cookiesAceitos', true);
        }

        // Função para recusar cookies
        function recusarCookies() {
            var cookieNotification = document.getElementById('cookie-notification');
            cookieNotification.style.display = 'none';

        // Configura cookies recusados
            localStorage.setItem('cookiesAceitos', false);
        }

        // Função para escolher um link
        function escolherLink(link) {
            if (localStorage.getItem('cookiesAceitos') === 'true') {
                localStorage.setItem('ultimoLinkClicado', link);
            }
            window.location.href = link;
        }

        // Verifica se o usuário já aceitou os cookies anteriormente
        var cookiesAceitos = localStorage.getItem('cookiesAceitos');

        if (cookiesAceitos === 'false' || cookiesAceitos === null) {
        // Se os cookies foram recusados anteriormente ou não foram aceitos ainda, mostrar a notificação
            mostrarNotificacao();
        } else if (cookiesAceitos === 'true') {
        // Se os cookies foram aceitos, redirecione para o último link clicado (ou nenhuma ação)
            var linkClicado = localStorage.getItem('ultimoLinkClicado');
            if (linkClicado) {
                window.location.href = linkClicado;
            }
        }

        // Adicione eventos de clique aos botões Aceitar e Recusar
        document.getElementById('aceitar-cookie').addEventListener('click', function () {
            aceitarCookies();
        });

        document.getElementById('recusar-cookie').addEventListener('click', function () {
            recusarCookies();
        });
    </script>
</body>
</html>